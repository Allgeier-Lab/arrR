---
title: "1. General Background"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{1. General Background}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

For a more detailed guide how to use `arrR`, please see the [Get started](getstarted.html) vignette.

## Model concept

The goal of *arrR* is to simulate seagrass production around artificial reefs (AR) using an individual-based simulation model (IBM). Seagrass biomass and water-column nutrients are simulated using a primary production model within grid cells. Fish individuals move across the cells, consume detritus and excrete nutrients. 

```{r concept_fig, echo = FALSE, out.width = "70%", fig.align = "center", fig.cap = "Schematic overview of model concept."}

knitr::include_graphics(path = "Concept.png")

```

## Scheduling

A simulation is started using the `run_simulation` function. This includes the simulation of the several sub-processes with the following scheduling:

**1. simulate_seagrass()**: Simulates belowground and aboveground seagrass slough and production based on the current biomass and the available nutrients for each grid cell. While slough decreases seagrass biomass and increases the detritus biomass, seagrass production increases the seagrass biomass.

**2. simulate_mineralization()**: Simulates mineralization of detritus biomass to water-column nutrients, i.e. decreases the detritus pool and increases the nutrients pool for each grid cell.

**3. simulate_movement()**: Simulates movement of fish individuals across the grid cells. Movement can be random or attracted towards reef cells. Uses torus translation at the boundary of the study area. 

**4. simulate_respiration()**: Simulates respiration of fish individuals based on their body size and their movement activity.

**5. simulate_growth()**: Simulates growth of fish individuals based on their current body size For this, individuals consume detritus biomass of the grid cell they are located in. If the detritus biomass is smaller than the required amount of individuals (based on growth and respiration), mortality takes place. Lastly, fish individuals excrete non-required consumption to the nutrients pool.

**6. simulate_mortality()**: Simulates a background mortality of fish individuals based on their body size. The mortality probability increases with increasing body size. All mortality events increase the detritus biomass.

**7. simulate_diffusion()**: Simulates diffusion of detritus biomass and water-column nutrients  across neighboring cells.

### References
DeAngelis, D.L., 1992. Dynamics of Nutrient Cycling and Food Webs. Springer Netherlands, Dordrecht. https://doi.org/10.1007/978-94-011-2342-6
